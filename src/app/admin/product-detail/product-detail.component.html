<div class="container-fluid p-4">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Yükleniyor...</span>
    </div>
    <p class="mt-2 text-muted">Ürün yükleniyor...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>

  <!-- Product Details -->
  <div *ngIf="product && !isLoading">
    <!-- Header -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item">
                  <a [routerLink]="['/admin']">Ana Sayfa</a>
                </li>
                <li class="breadcrumb-item">
                  <a [routerLink]="['/admin/products']">Ürünler</a>
                </li>
                <li class="breadcrumb-item active">{{ product.name }}</li>
              </ol>
            </nav>
            <h1 class="h3 mb-0">{{ product.name }}</h1>
          </div>
          <div class="btn-group" role="group">
            <button class="btn btn-warning" (click)="navigateToEdit()">
              <i class="fas fa-edit me-2"></i>Düzenle
            </button>
            <button class="btn btn-danger" (click)="deleteProduct()">
              <i class="fas fa-trash me-2"></i>Sil
            </button>
            <button class="btn btn-secondary" (click)="navigateToProducts()">
              <i class="fas fa-arrow-left me-2"></i>Geri
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Product Info -->
      <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Ürün Bilgileri</h5>
            <div class="row mt-3">
              <div class="col-md-6">
                <p><strong>Ürün Adı:</strong> {{ product.name }}</p>
                <p><strong>Kategori:</strong> {{ product.category || 'Belirtilmemiş' }}</p>
                <p><strong>Fiyat:</strong> {{ product.price | currency:'TRY':'symbol':'1.0-0' }}</p>
                <p><strong>Stok:</strong> {{ product.stock }}</p>
              </div>
              <div class="col-md-6">
                <p><strong>Durum:</strong>
                  <span class="badge" [class.bg-success]="product.isActive" [class.bg-danger]="!product.isActive">
                    {{ product.isActive ? 'Aktif' : 'Pasif' }}
                  </span>
                </p>
                <p><strong>Oluşturulma:</strong> {{ product.createdAt | date:'dd.MM.yyyy HH:mm' }}</p>
                <p><strong>Güncelleme:</strong> {{ product.updatedAt | date:'dd.MM.yyyy HH:mm' }}</p>
              </div>
            </div>

            <div *ngIf="product.description" class="mt-3">
              <h6>Açıklama:</h6>
              <p>{{ product.description }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Colors -->
      <div class="col-lg-4">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Renkler</h5>
            <div *ngIf="product.colors && product.colors.length > 0; else noColorsTemplate" class="mt-3">
              <div class="row g-2">
                <div class="col-12" *ngFor="let color of product.colors">
                  <div class="d-flex align-items-center justify-content-between p-2 border rounded">
                    <div class="d-flex align-items-center">
                      <div
                        class="rounded-circle me-2"
                        [style.background-color]="color.hexCode"
                        style="width: 20px; height: 20px; border: 1px solid #ddd;">
                      </div>
                      <span>{{ color.name }}</span>
                    </div>
                    <span class="badge bg-primary">{{ color.price | currency:'TRY':'symbol':'1.0-0' }}</span>
                  </div>
                </div>
              </div>
              <div class="mt-3 pt-3 border-top">
                <p class="mb-0"><strong>Toplam Renk Fiyatı:</strong> {{ getTotalColorPrice(product.colors) | currency:'TRY':'symbol':'1.0-0' }}</p>
              </div>
            </div>

            <ng-template #noColorsTemplate>
              <p class="text-muted">Bu ürün için renk bilgisi bulunmamaktadır.</p>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
